# 图片重复查找器 - 使用说明

## 快速开始

### 1. 启动应用
```bash
# 开发模式（推荐）
npm run start:dev

# 或生产模式
npm run start
```

### 2. 使用步骤

#### 第一步：系统设置
1. 打开应用后，默认进入"设置"选项卡
2. 调整相似度阈值和其他参数
3. 点击"保存设置"

#### 第二步：索引图片
1. 切换到"索引图片"选项卡
2. 点击"浏览..."选择要索引的图片目录
3. 点击"开始索引"按钮
4. 等待索引完成（会显示进度条）

#### 第三步：查看已索引图片
1. 切换到"已索引图片"选项卡
2. 查看所有已索引的图片列表

#### 第四步：查找相似图片
1. 切换到"查找相似图片"选项卡
2. 点击"浏览..."选择一张查询图片
3. 调整最大结果数和相似度阈值
4. 点击"查找相似图片"按钮
5. 查看结果列表

## 功能说明

### 支持的图片格式
- JPG/JPEG
- PNG
- GIF
- WEBP

### 相似度阈值说明
- **0.9-1.0**: 非常相似，可能是重复图片
- **0.8-0.9**: 相似，可能是同一场景的不同角度
- **0.7-0.8**: 部分相似，可能有共同元素

### 系统状态说明
- **已初始化**: 系统正常运行
- **模型名称**: 当前使用的AI模型
- **已索引图片**: 数据库中存储的图片数量
- **向量维度**: 模型输出的特征向量维度
- **数据库路径**: 本地向量数据库的存储路径
- **索引文件大小**: 索引文件在磁盘上的大小
- **元数据文件大小**: 元数据文件在磁盘上的大小
- **最后修改时间**: 数据库的最后更新时间
- **应用版本**: 当前应用的版本号
- **Node.js 版本**: Node.js的版本号
- **Electron 版本**: Electron的版本号
- **支持格式**: 当前支持的图片格式

## 故障排除

### 1. 索引失败
**症状**: 索引过程中出现错误

**可能原因**:
- 目录中没有支持的图片格式
- 图片文件损坏
- 磁盘空间不足

**解决方案**:
- 检查目录中是否有支持的图片文件
- 确保图片文件完整且可读
- 检查磁盘空间

### 2. 查找结果为空
**症状**: 查找相似图片时没有结果

**可能原因**:
- 数据库为空（需要先索引图片）
- 相似度阈值设置过高
- 查询图片不在索引范围内

**解决方案**:
- 确保已经索引了包含查询图片的目录
- 降低相似度阈值
- 检查查询图片是否在已索引的目录中

### 3. 应用启动失败
**症状**: 应用无法启动或启动后立即崩溃

**解决方案**:
```bash
# 清理并重新安装依赖
rm -rf node_modules package-lock.json
npm install

# 重新启动应用
npm run start
```

## 技术架构

### 核心组件
- **@xenova/transformers**: AI模型库
- **clip-vit-base-patch16**: 图片特征提取模型
- **Electron 框架**: 跨平台桌面应用

### 数据存储
- 向量数据库文件: `vector_db/faiss.index`
- 元数据文件: `vector_db/metadata.json`
- 应用设置: 存储在系统用户数据目录

## 更新和维护

### 1. 更新应用
```bash
# 拉取最新代码
git pull

# 重新安装依赖
npm install

# 重启应用
npm run start
```

### 2. 清理数据
```bash
# 删除向量数据库（会丢失所有索引数据）
rm -rf vector_db/

# 重新启动应用
npm run start
```

### 3. 日志查看
应用运行时的日志会输出到控制台，可以通过以下方式查看：
- 开发模式：直接在终端查看
- 生产模式：查看系统日志

## 联系和支持

如果遇到问题或有改进建议，请：
1. 检查本文档的故障排除部分
2. 查看应用控制台输出的错误信息
3. 尝试重新安装和配置

---

**注意**: 本应用使用本地AI模型，所有图片处理都在本地进行，保护用户隐私。

---

**最后更新**: 2025-08-08

---

**版本**: 1.0.0